From: Sam Macbeth <sam@cliqz.com>
Date: Wed, 23 Sep 2020 16:30:43 +0200
Subject: Manual override of search engine list

---
 .../search/extensions/ghostery/favicon.ico    | Bin 0 -> 1672 bytes
 .../search/extensions/ghostery/manifest.json  |  41 ++++++++++++
 .../search/extensions/tailcat/favicon.ico     | Bin 0 -> 15086 bytes
 .../search/extensions/tailcat/manifest.json   |  29 ++++++++
 .../search/SearchEngineSelector.jsm           |  62 ++++++++++++++++++
 5 files changed, 132 insertions(+)
 create mode 100644 browser/components/search/extensions/ghostery/favicon.ico
 create mode 100644 browser/components/search/extensions/ghostery/manifest.json
 create mode 100644 browser/components/search/extensions/tailcat/favicon.ico
 create mode 100644 browser/components/search/extensions/tailcat/manifest.json

diff --git a/browser/components/search/extensions/ghostery/favicon.ico b/browser/components/search/extensions/ghostery/favicon.ico
new file mode 100644
index 0000000000000000000000000000000000000000..a8b38a2908fb8bb7bd3cd3f90d7902d9f448ca79
GIT binary patch
literal 1672
zcmb_bdrXs86u)hOLd!!|UelpP9#&hrf{2Xi5NH(;5NliNlFb%qkqKJ0Q&Hy%L5(^e
zQE?^{<t0HLr3Dcv3=oj;9wJ3h?4XEKQT+O~fNg2J5|_m#x<8iPoO{o?=lsq&_awi2
zDlT@D9cD2G0ALpxL8Y5Deqmdq%qO+*bh}wuB!|X?0w6t)o#$FE1QR3ZF#sI)0YH=m
zfX?g^JqO@>3IH!T00dtJz*TTfwsjo<$m4O*44N4L#41o>76^zTAb~*z3~J^U><`M{
z$PY%}Ip3A~7r=iDeXQ)q{O@-$&-K^aR3Dz}eenNnBgD|6DwT~C0_6}!s&c4OZSR`t
zo}MqC)OpL`6*5>nsq31akMEoz)WeDygUMvd8PlRFAd3p<#<=#0#^57^6MJWu)WGgF
zu+e1V^v)iZ&rNBKE9+rmgZh=$cyMrz-#5Fg79N{1kQ&s=SwsG~&Qb#1RO-fO46Ewl
zgx*;>JYV}<PppUQUg!r^^PHYpq!@CkR@qgm>?>8y)hd)2`l?0aR;>bMP<X2bErDol
znnI<H@~hgT4*pr8wU$5yO5GoG#_T6rddEyaliI&gy}4a;a^&r(#?U;acfPG!UJJLr
z((8>TNN0SbGinW{5w#(xN$ph!tM$gW22)^@8Y6{5S~PnH<_<iVi@c|?m`Hau^YDO>
z9=mOUkPB<kYDV%-W`H9CK{(p_Vs8HJy&s9l^s$K_a2{eqmAAXB8FQn^_G>NIp*>s^
zb-b_)Wp$^)8eP|9W8*Y1>_(dQXB#<)tGURf3eP>hQ@U{#-17SyeBOCFHbt=Irvfij
ze(`rVmACAcWl=0M>W9|Pn42OJHgBSy)Q@1h%@?#VGKPj8N7_5MJ34QRL7TtKl1OSO
zBd9x(BSLNTv5zJ1Ui$4<#}It0=;q}FFVgZ=K4h}Ts+Hcpt(iW(9W9>|<E_vz<}|6S
z1MVS3bt!of8)(e4$89`*YtI*NJz*7)&0a+2-X9>hf?yfR8mnpB5H{(Y&E)Zz@->tA
z>y3!fPh7%dB-bCwbSFwm+KZmKP##7&@-5CtZ7%GPKN?af?vKcyC=?H{0k@)ioJvHe
zXo$kRk_vZ%JOojks`R>$>A$+zorHYGvAmRlDT>YsbdTr-M2RHJ?QR0kjzz%{9t3iS
zQt@&$i<5|Da*`cbl;qt<^bKMy_R(WkGLk3|ByD8Hu^JC`4)B=F{Z}g3HnS^anQ$Mo
z^r5JQ`&!1F>Xxn?mh8oO*_IBaDl%!I@}acH@yv|ob2(?EGVa6a^+)DjhX|nlanDWC
zy1cTN!>U=_iY+<2L-yanlx9|z?8o-i)a+m%lVTQ6P%LBZ``yGcp|(rD%Q;T#@3}Lp
zDyY60hv+yfI9Ixakx{?%Q`XqH4Xe3N>3!~-j2efa;O$2ZT>@YN7aU0$;#wyQ%PP@D
zYz>BNsqonFC0m%*B|ticyI5W6msCR5j-3&VTZDq=ZiY&BY;I=l+brr$uks|nq;$jO
z!ou3Y+ZtOJE1#n1P=1`E6Uh(KzPk2wbY1Q*Fjmx;$nQ%^qCRa5ODo7vAi7++*iVmC
zb6f(8Ex_gKC~3P>-ISR*-a;B%n8X$Gf)n@g%nJBZ{MPzX{C)ib7=CMl{l5tITT7()
z1yd;HyVCRik&w10DTSZ@@r2R9yYA+M_`?jgkj_1b7wp@^Pf6wBh3NtwK1Co*1mMuM
z3E0+pFN;9v+S1(<IY|d7Pb@hRi}S>7zT||$;i;m4)+Cf?6$9TrJlN6J)Am^#x?2>H
a8$|{$T^)sR*qUr}3lK?*rHaEinSTPP`z0m-

literal 0
HcmV?d00001

diff --git a/browser/components/search/extensions/ghostery/manifest.json b/browser/components/search/extensions/ghostery/manifest.json
new file mode 100644
index 0000000000..a923fdb002
--- /dev/null
+++ b/browser/components/search/extensions/ghostery/manifest.json
@@ -0,0 +1,41 @@
+{
+  "name": "Ghostery",
+  "description": "Search Ghostery",
+  "manifest_version": 2,
+  "version": "1.0",
+  "applications": {
+    "gecko": {
+      "id": "ghostery@search.mozilla.org"
+    }
+  },
+  "hidden": true,
+  "icons": {
+    "16": "favicon.ico"
+  },
+  "web_accessible_resources": [
+    "favicon.ico"
+  ],
+  "chrome_settings_overrides": {
+    "search_provider": {
+      "name": "Ghostery",
+      "search_url": "https://ui.customsearch.ai/hosted-page",
+      "search_form": "https://ui.customsearch.ai/hosted-page?customconfig=0cfcbc1f-6c1f-4008-9b5f-d56b1009e1f3&version=latest&market=en-US&q=",
+      "search_url_get_params": "q={searchTerms}",
+      "params": [
+        {
+          "name": "customconfig",
+          "value": "0cfcbc1f-6c1f-4008-9b5f-d56b1009e1f3"
+        },
+        {
+          "name": "version",
+          "value": "latest"
+        },
+        {
+          "name": "market",
+          "value": "en-US"
+        }
+      ]
+    }
+  }
+}
+
diff --git a/browser/components/search/extensions/tailcat/favicon.ico b/browser/components/search/extensions/tailcat/favicon.ico
new file mode 100644
index 0000000000000000000000000000000000000000..fde51f907c563e396d9f614b186289b0ebd6744e
GIT binary patch
literal 15086
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
KU;F(a*Y<zf>l3s9

literal 0
HcmV?d00001

diff --git a/browser/components/search/extensions/tailcat/manifest.json b/browser/components/search/extensions/tailcat/manifest.json
new file mode 100644
index 0000000000..a6efe21f4f
--- /dev/null
+++ b/browser/components/search/extensions/tailcat/manifest.json
@@ -0,0 +1,29 @@
+{
+  "name": "Tailcat",
+  "description": "Search Tailcat",
+  "manifest_version": 2,
+  "version": "1.0",
+  "applications": {
+    "gecko": {
+      "id": "tailcat@search.mozilla.org"
+    }
+  },
+  "hidden": true,
+  "icons": {
+    "16": "favicon.ico"
+  },
+  "web_accessible_resources": [
+    "favicon.ico"
+  ],
+  "chrome_settings_overrides": {
+    "search_provider": {
+      "name": "Tailcat",
+      "search_url": "https://meow.tailcat.com/search",
+      "search_form": "https://meow.tailcat.com/search?q={searchTerms}",
+      "search_url_get_params": "q={searchTerms}",
+      "params": [],
+      "suggest_url": "https://meow.tailcat.com/api/suggest",
+      "suggest_url_get_params": "q={searchTerms}"
+    }
+  }
+}
\ No newline at end of file
diff --git a/toolkit/components/search/SearchEngineSelector.jsm b/toolkit/components/search/SearchEngineSelector.jsm
index 5a6992e0c9..5abcf6f003 100644
--- a/toolkit/components/search/SearchEngineSelector.jsm
+++ b/toolkit/components/search/SearchEngineSelector.jsm
@@ -94,6 +94,68 @@ class SearchEngineSelector {
     this._changeListener = listener;
   }
 
+  get _configuration() {
+    return [{
+      "appliesTo": [{
+        "default": "yes-if-no-other",
+        "included": {
+          "everywhere": true
+        },
+      }],
+      "webExtension": {
+        "id": "ghostery@search.mozilla.org"
+      }
+    }, {
+      "appliesTo": [{
+        "included": {
+          "everywhere": true
+        },
+      }],
+      "webExtension": {
+        "id": "tailcat@search.mozilla.org"
+      }
+    }, {
+      "appliesTo": [{
+          "included": {
+            "everywhere": true
+          }
+      }],
+      "id": "c0b26c0e-63e6-4235-b2ce-5f16b6a8bf87",
+      "last_modified": 1595254832054,
+      "schema": 1594312388385,
+      "webExtension": {
+        "id": "ddg@search.mozilla.org"
+      }
+    }, {
+      "appliesTo": [{
+        "included": {
+          "everywhere": true
+        }
+      }],
+      "id": "3f3beb1d-e32e-40a4-b6ed-56741803e1d8",
+      "last_modified": 1589299342069,
+      "schema": 1588177692141,
+      "webExtension": {
+        "id": "wikipedia@search.mozilla.org"
+      }
+    }, {
+      "appliesTo": [{
+        "included": {
+          "everywhere": true
+        }
+      }],
+      "id": "cb8e7210-9f0b-48fa-8708-b9a03df79eea",
+      "last_modified": 1595254832050,
+      "schema": 1594237297787,
+      "telemetryId": "google-b-d",
+      "webExtension": {
+        "id": "google@search.mozilla.org"
+      }
+    }]
+  }
+
+  set _configuration(v) {}
+
   /**
    * Handles getting the configuration from remote settings.
    */
-- 
2.28.0

