From: Sam Macbeth <sam@cliqz.com>
Date: Wed, 23 Sep 2020 16:30:43 +0200
Subject: Manual override of search engine list

---
 .../search/extensions/tailcat/favicon.ico     | Bin 0 -> 15086 bytes
 .../search/extensions/tailcat/manifest.json   |  29 ++++++++
 .../search/SearchEngineSelector.jsm           |  62 ++++++++++++++++++
 3 files changed, 91 insertions(+)
 create mode 100644 browser/components/search/extensions/ghostery/favicon.ico
 create mode 100644 browser/components/search/extensions/ghostery/manifest.json
 create mode 100644 browser/components/search/extensions/tailcat/favicon.ico
 create mode 100644 browser/components/search/extensions/tailcat/manifest.json

diff --git a/browser/components/search/extensions/tailcat/favicon.ico b/browser/components/search/extensions/tailcat/favicon.ico
new file mode 100644
index 0000000000000000000000000000000000000000..fde51f907c563e396d9f614b186289b0ebd6744e
GIT binary patch
literal 15086
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
KU;F(a*Y<zf>l3s9

literal 0
HcmV?d00001

diff --git a/browser/components/search/extensions/tailcat/manifest.json b/browser/components/search/extensions/tailcat/manifest.json
new file mode 100644
index 0000000000..a6efe21f4f
--- /dev/null
+++ b/browser/components/search/extensions/tailcat/manifest.json
@@ -0,0 +1,29 @@
+{
+  "name": "Tailcat",
+  "description": "Search Tailcat",
+  "manifest_version": 2,
+  "version": "1.0",
+  "applications": {
+    "gecko": {
+      "id": "tailcat@search.mozilla.org"
+    }
+  },
+  "hidden": true,
+  "icons": {
+    "16": "favicon.ico"
+  },
+  "web_accessible_resources": [
+    "favicon.ico"
+  ],
+  "chrome_settings_overrides": {
+    "search_provider": {
+      "name": "Tailcat",
+      "search_url": "https://meow.tailcat.com/search",
+      "search_form": "https://meow.tailcat.com/search?q={searchTerms}",
+      "search_url_get_params": "q={searchTerms}",
+      "params": [],
+      "suggest_url": "https://meow.tailcat.com/api/suggest",
+      "suggest_url_get_params": "q={searchTerms}"
+    }
+  }
+}
\ No newline at end of file
diff --git a/toolkit/components/search/SearchEngineSelector.jsm b/toolkit/components/search/SearchEngineSelector.jsm
index 5a6992e0c9..5abcf6f003 100644
--- a/toolkit/components/search/SearchEngineSelector.jsm
+++ b/toolkit/components/search/SearchEngineSelector.jsm
@@ -94,6 +94,68 @@ class SearchEngineSelector {
     this._changeListener = listener;
   }

+  get _configuration() {
+    return [{
+      "appliesTo": [{
+        "default": "yes-if-no-other",
+        "included": {
+          "everywhere": true
+        },
+      }],
+      "webExtension": {
+        "id": "search@ghostery.com"
+      }
+    }, {
+      "appliesTo": [{
+        "included": {
+          "everywhere": true
+        },
+      }],
+      "webExtension": {
+        "id": "tailcat@search.mozilla.org"
+      }
+    }, {
+      "appliesTo": [{
+          "included": {
+            "everywhere": true
+          }
+      }],
+      "id": "c0b26c0e-63e6-4235-b2ce-5f16b6a8bf87",
+      "last_modified": 1595254832054,
+      "schema": 1594312388385,
+      "webExtension": {
+        "id": "ddg@search.mozilla.org"
+      }
+    }, {
+      "appliesTo": [{
+        "included": {
+          "everywhere": true
+        }
+      }],
+      "id": "3f3beb1d-e32e-40a4-b6ed-56741803e1d8",
+      "last_modified": 1589299342069,
+      "schema": 1588177692141,
+      "webExtension": {
+        "id": "wikipedia@search.mozilla.org"
+      }
+    }, {
+      "appliesTo": [{
+        "included": {
+          "everywhere": true
+        }
+      }],
+      "id": "cb8e7210-9f0b-48fa-8708-b9a03df79eea",
+      "last_modified": 1595254832050,
+      "schema": 1594237297787,
+      "telemetryId": "google-b-d",
+      "webExtension": {
+        "id": "google@search.mozilla.org"
+      }
+    }]
+  }
+
+  set _configuration(v) {}
+
   /**
    * Handles getting the configuration from remote settings.
    */
--
2.28.0

