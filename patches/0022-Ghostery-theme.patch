From: Krzysztof Jan Modras <chrmod@chrmod.net>
Date: Mon, 19 Oct 2020 11:00:56 +0200
Subject: Ghostery theme

---
 toolkit/modules/LightweightThemeConsumer.jsm  |  2 +-
 .../background-gradient-dark.svg              |  1 +
 .../default-theme/background-gradient.svg     |  1 +
 .../extensions/default-theme/manifest.json    | 45 ++++++++++---------
 .../extensions/internal/XPIProvider.jsm       |  2 +-
 toolkit/mozapps/extensions/jar.mn             |  2 +
 toolkit/themes/linux/global/toolbarbutton.css |  2 +-
 toolkit/themes/osx/global/toolbarbutton.css   |  2 +-
 .../themes/windows/global/toolbarbutton.css   |  2 +-
 9 files changed, 32 insertions(+), 27 deletions(-)
 create mode 100644 toolkit/mozapps/extensions/default-theme/background-gradient-dark.svg
 create mode 100644 toolkit/mozapps/extensions/default-theme/background-gradient.svg

diff --git a/toolkit/modules/LightweightThemeConsumer.jsm b/toolkit/modules/LightweightThemeConsumer.jsm
index 039aeb93c7..c3e3428fac 100644
--- a/toolkit/modules/LightweightThemeConsumer.jsm
+++ b/toolkit/modules/LightweightThemeConsumer.jsm
@@ -6,7 +6,7 @@ var EXPORTED_SYMBOLS = ["LightweightThemeConsumer"];
 
 const { Services } = ChromeUtils.import("resource://gre/modules/Services.jsm");
 
-const DEFAULT_THEME_ID = "default-theme@mozilla.org";
+const DEFAULT_THEME_ID = "__DOES_NOT_APPLY__"; // in Ghostery Browser default theme is a lightweight theme
 
 ChromeUtils.defineModuleGetter(
   this,
diff --git a/toolkit/mozapps/extensions/default-theme/background-gradient-dark.svg b/toolkit/mozapps/extensions/default-theme/background-gradient-dark.svg
new file mode 100644
index 0000000000..0c9a971f29
--- /dev/null
+++ b/toolkit/mozapps/extensions/default-theme/background-gradient-dark.svg
@@ -0,0 +1 @@
+<svg height="200" viewBox="0 0 3000 200" width="3000" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><linearGradient id="a" x1="0%" x2="100%" y1="49.777778%" y2="50.187103%"><stop offset="0" stop-color="#2b5993"/><stop offset=".614537806" stop-color="#17304f"/><stop offset="1"/></linearGradient><path d="m0 0h3000v200h-3000z" fill="url(#a)"/></svg>
\ No newline at end of file
diff --git a/toolkit/mozapps/extensions/default-theme/background-gradient.svg b/toolkit/mozapps/extensions/default-theme/background-gradient.svg
new file mode 100644
index 0000000000..850918c938
--- /dev/null
+++ b/toolkit/mozapps/extensions/default-theme/background-gradient.svg
@@ -0,0 +1 @@
+<svg height="200" viewBox="0 0 3000 200" width="3000" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><linearGradient id="a" x1="0%" x2="100%" y1="49.777778%" y2="50.187103%"><stop offset="0" stop-color="#720174"/><stop offset="1" stop-color="#00aef0"/></linearGradient><path d="m0 0h3000v200h-3000z" fill="url(#a)"/></svg>
\ No newline at end of file
diff --git a/toolkit/mozapps/extensions/default-theme/manifest.json b/toolkit/mozapps/extensions/default-theme/manifest.json
index 05d6e0e19a..313378f316 100644
--- a/toolkit/mozapps/extensions/default-theme/manifest.json
+++ b/toolkit/mozapps/extensions/default-theme/manifest.json
@@ -7,36 +7,37 @@
     }
   },
 
-  "name": "Default",
-  "description": "A theme with the operating system color scheme.",
-  "author": "Mozilla",
-  "version": "1.1",
+  "name": "Ghostery Browser Theme",
+  "description": "",
+  "author": "Ghostery",
+  "version": "1.2",
 
   "icons": {"32": "icon.svg"},
 
   "theme": {
+    "images": {
+      "theme_frame": "background-gradient.svg"
+    },
+    "colors": {
+      "frame": "rgba(114, 1, 116, 1)",
+      "tab_background_text": "rgba(255, 255, 255, 1)",
+      "toolbar": "rgba(0, 0, 0, 0.5)",
+      "toolbar_field_text": "rgba(0, 0, 0, 1)",
+      "toolbar_field_highlight": "#0063E1",
+      "popup_highlight": "#00aef0"
+    }
   },
 
   "dark_theme": {
+    "images": {
+      "theme_frame": "background-gradient-dark.svg"
+    },
     "colors": {
-      "tab_background_text": "rgb(249, 249, 250)",
-      "icons": "rgb(249, 249, 250, 0.7)",
-      "frame": "hsl(240, 5%, 5%)",
-      "popup": "#4a4a4f",
-      "popup_text": "rgb(249, 249, 250)",
-      "popup_border": "#27272b",
-      "tab_line": "#0a84ff",
-      "toolbar": "hsl(240, 1%, 20%)",
-      "toolbar_bottom_separator": "hsl(240, 5%, 5%)",
-      "toolbar_field": "rgb(71, 71, 73)",
-      "toolbar_field_border": "rgba(249, 249, 250, 0.2)",
-      "toolbar_field_separator": "#5F6670",
-      "toolbar_field_text": "rgb(249, 249, 250)",
-      "ntp_background": "#2A2A2E",
-      "ntp_text": "rgb(249, 249, 250)",
-      "sidebar": "#38383D",
-      "sidebar_text": "rgb(249, 249, 250)",
-      "sidebar_border": "rgba(255, 255, 255, 0.1)"
+      "frame": "rgba(0, 0, 0, 1)",
+      "tab_background_text": "rgba(255, 255, 255, 1)",
+      "toolbar": "rgba(61, 61, 61, 0.5)",
+      "toolbar_field": "rgba(61, 61, 61, 1)",
+      "toolbar_field_text": "rgba(255, 255, 255, 1)"
     }
   }
 }
diff --git a/toolkit/mozapps/extensions/internal/XPIProvider.jsm b/toolkit/mozapps/extensions/internal/XPIProvider.jsm
index 2d79d9b68a..e9b8f5ac8d 100644
--- a/toolkit/mozapps/extensions/internal/XPIProvider.jsm
+++ b/toolkit/mozapps/extensions/internal/XPIProvider.jsm
@@ -2460,7 +2460,7 @@ var XPIProvider = {
 
       this.maybeInstallBuiltinAddon(
         "default-theme@mozilla.org",
-        "1.1",
+        "1.2",
         "resource://default-theme/"
       );
 
diff --git a/toolkit/mozapps/extensions/jar.mn b/toolkit/mozapps/extensions/jar.mn
index a203524e23..1b924aa053 100644
--- a/toolkit/mozapps/extensions/jar.mn
+++ b/toolkit/mozapps/extensions/jar.mn
@@ -37,4 +37,6 @@ toolkit.jar:
 % resource default-theme %content/mozapps/extensions/default-theme/
   content/mozapps/extensions/default-theme/icon.svg             (default-theme/icon.svg)
   content/mozapps/extensions/default-theme/manifest.json        (default-theme/manifest.json)
+  content/mozapps/extensions/default-theme/background-gradient-dark.svg        (default-theme/background-gradient-dark.svg)
+  content/mozapps/extensions/default-theme/background-gradient.svg        (default-theme/background-gradient.svg)
 #endif
diff --git a/toolkit/themes/linux/global/toolbarbutton.css b/toolkit/themes/linux/global/toolbarbutton.css
index 3e6169d75c..a54168f7d8 100644
--- a/toolkit/themes/linux/global/toolbarbutton.css
+++ b/toolkit/themes/linux/global/toolbarbutton.css
@@ -76,7 +76,7 @@ toolbarbutton:-moz-lwtheme:not(:hover):not([checked="true"]):not([open="true"]):
   box-shadow: 0 1px 0 hsla(0, 100%, 100%, .2) inset,
               0 -1px 0 hsla(0, 0%, 0%, .1) inset,
               0 1px 0 hsla(206, 50%, 10%, .2);
-  margin: -6px 0 0 !important;
+  margin: -4px 0 0 !important;
   margin-inline-end: -8px !important;
   min-width: 14px;
   max-width: 24px;
diff --git a/toolkit/themes/osx/global/toolbarbutton.css b/toolkit/themes/osx/global/toolbarbutton.css
index 5a0621d000..37158aa2b9 100644
--- a/toolkit/themes/osx/global/toolbarbutton.css
+++ b/toolkit/themes/osx/global/toolbarbutton.css
@@ -47,7 +47,7 @@ toolbarbutton[disabled="true"] {
   box-shadow: 0 1px 0 hsla(0, 100%, 100%, .2) inset,
               0 -1px 0 hsla(0, 0%, 0%, .1) inset,
               0 1px 0 hsla(206, 50%, 10%, .2);
-  margin: -6px 0 0 !important;
+  margin: -4px 0 0 !important;
   margin-inline-end: -6px !important;
   min-width: 14px;
   max-width: 24px;
diff --git a/toolkit/themes/windows/global/toolbarbutton.css b/toolkit/themes/windows/global/toolbarbutton.css
index ef827dedb5..6fa966f858 100644
--- a/toolkit/themes/windows/global/toolbarbutton.css
+++ b/toolkit/themes/windows/global/toolbarbutton.css
@@ -90,7 +90,7 @@ toolbarbutton[disabled="true"] {
   box-shadow: 0 1px 0 hsla(0, 100%, 100%, .2) inset,
               0 -1px 0 hsla(0, 0%, 0%, .1) inset,
               0 1px 0 hsla(206, 50%, 10%, .2);
-  margin: -6px 0 0 !important;
+  margin: -4px 0 0 !important;
   margin-inline-end: -8px !important;
   min-width: 14px;
   max-width: 24px;
-- 
2.29.2

